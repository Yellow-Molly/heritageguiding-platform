# Phase 5-6: Integration Considerations & Recommendations

## Critical Integration Considerations

### A. Booking System Mismatch (Biggest Gap)

SHT uses **FareHarbor**, platform uses **Bokun**.

| Option | Effort | Integration Level | Recommendation |
|--------|--------|-------------------|----------------|
| SHT migrates to Bokun | High | Full | Not practical short-term |
| Platform adds FareHarbor integration | Medium | Full | Future phase if more FareHarbor vendors join |
| External booking links | Low | Partial | **Recommended for MVP** |
| Manual booking via group inquiry | Low | Minimal | Fallback option |

**Recommended:** Add `bookingProvider` (select: bokun/fareharbor/external/manual) and `externalBookingUrl` fields to Tours. Booking section renders external link button for non-Bokun tours.

### B. Localization

- SHT content primarily in English
- Platform supports sv/en/de
- **Required:** Swedish translations for all tour content
- **Optional but valuable:** German translations (SHT has German-speaking guide)
- CSV import supports Swedish fallback — EN/DE columns can be empty, SV used as fallback

### C. Public vs Private Tour Variants

SHT offers same tour as both public and private with different pricing.

| Option | Pros | Cons |
|--------|------|------|
| Separate tour entries | Simple, clear pricing | Doubles tour count, content duplication |
| Pricing tiers/variants (new model) | Clean data model | Requires schema change |
| `priceType: 'custom'` with description | No schema change | Less structured |

**Recommended:** Create separate entries for now (e.g., `viking-tour-public`, `viking-tour-private`). Revisit with pricing variants model if needed later (YAGNI).

### D. Image Migration

- SHT images need download and re-upload to Vercel Blob via Media collection
- Need proper alt text and captions (localized)
- Responsive sizes auto-generated by Payload
- **Action:** Manual image upload per tour, or batch script

### E. Transported vs Walking Classification

Platform lacks transport type field.

**Recommended:** Add `transportType` select field (walking/transported/both) to Tours. Simple, no schema complexity.

---

## Recommended Platform Changes (When Ready)

### New Tour Fields

| Field | Type | Purpose |
|-------|------|---------|
| `bookingProvider` | select (bokun/fareharbor/external/manual) | Which booking system tour uses |
| `externalBookingUrl` | text (URL) | External booking link for non-Bokun tours |
| `transportType` | select (walking/transported/both) | Tour transport classification |

### Booking Section Update

- When `bookingProvider === 'bokun'` → Show Bokun widget (existing)
- When `bookingProvider === 'fareharbor'` or `'external'` → Show "Book Now" button linking to `externalBookingUrl`
- When `bookingProvider === 'manual'` → Show email inquiry form (existing fallback)

### CSV Pipeline Update

- Add `bookingProvider`, `externalBookingUrl`, `transportType` to column mapping
- Add validation in Zod schema
- Update `csvRowToTourData` converter

---

## Recommended Action Sequence

1. **Collect decisions** from stakeholders on booking approach and public/private strategy
2. **Add CMS fields** (bookingProvider, externalBookingUrl, transportType)
3. **Seed 9 new categories** via admin API
4. **Update CSV pipeline** for new fields
5. **Update booking section** component for external URLs
6. **Collect SHT data** into import CSV (work with SHT team on missing fields)
7. **Collect guide data** — full bios, photos, emails for 14 guides
8. **Import tours** via CSV pipeline with `dryRun=true` first
9. **Upload images** manually or via batch script
10. **QA and publish** tours

## Unresolved Questions

1. Does SHT want to migrate to Bokun long-term, or keep FareHarbor?
2. How should public vs private variants be priced — separate listings or combined?
3. Who provides Swedish translations — SHT team or platform team?
4. Are all 59 tours active, or should we import a subset first?
5. What accessibility info can SHT provide per tour?
